System.register(["./p-44cbb351.system.js"],(function(e){"use strict";var t,n,a,i;return{setters:[function(e){t=e.r;n=e.h;a=e.g;i=e.H}],execute:function(){var r="taro-movable-area-core{display:block;height:10px;width:10px;position:relative}";var o=e("taro_movable_area_core",function(){function e(e){var n=this;t(this,e);this.views=[];this.scaleLength=0;this.viewsChanged=function(){n.views=[];var e=n.element.querySelectorAll("taro-movable-view-core");Array.from(e).forEach((function(e){n.views.push(e)}));n.updateArea()};this.handleTouchStart=function(e){var t=e.touches;if(!t||t.length<=1){return}var a={width:t[1].pageX-t[0].pageX,height:t[1].pageY-t[0].pageY};n.scaleLength=Math.sqrt(a.width*a.width+a.height*a.height);if(n.scaleArea){return}var i=function(e,t){var n=function(e,t){if(!(e=e.parentNode)){return false}return(!(e instanceof HTMLElement)||e!==document.body)&&(e===t||e===t.element||e.element===t||n(e,t))};for(var a=0;a<t.length;a++){var i=t[a];if(e===i["element"]||n(e,i)){return i}}};var r=i(t[0].target,n.views);var o=i(t[1].target,n.views);n.scaleTarget=r&&r===o?r:undefined};this.handleTouchMove=function(e){var t=e.touches;if(!t||t.length<=1){return}e.preventDefault();var a={width:t[1].pageX-t[0].pageX,height:t[1].pageY-t[0].pageY};if(n.scaleLength>0){n.updateScale(Math.sqrt(a.width*a.width+a.height*a.height)/n.scaleLength)}};this.handleTouchEnd=function(e){var t,a;if(e.touches&&e.touches.length||!e.changedTouches){return}n.scaleLength=0;if(n.scaleArea){n.views.forEach((function(e){var t;(t=e["endScale"])===null||t===void 0?void 0:t.call(e)}))}else{(a=(t=n.scaleTarget)===null||t===void 0?void 0:t["endScale"])===null||a===void 0?void 0:a.call(t)}n.scaleTarget=undefined};this.updateScale=function(e){var t,a;if(!e||e===1){return}if(n.scaleArea){n.views.forEach((function(t){var n;(n=t["setScale"])===null||n===void 0?void 0:n.call(t,e)}))}else{(a=(t=n.scaleTarget)===null||t===void 0?void 0:t["setScale"])===null||a===void 0?void 0:a.call(t,e)}};this.updateArea=function(){var e=window.getComputedStyle(n.element);var t=n.element.getBoundingClientRect();var a=["Left","Right"].map((function(t){return parseFloat(e["border"+t+"Width"])+parseFloat(e["padding"+t])}));var i=["Top","Bottom"].map((function(t){return parseFloat(e["border"+t+"Width"])+parseFloat(e["padding"+t])}));n.views.forEach((function(e){var r;(r=e["setParent"])===null||r===void 0?void 0:r.call(e,{element:n.element,area:{height:t.height-i[0]-i[1],width:t.width-a[0]-a[1]}})}))}}e.prototype.connectedCallback=function(){var e=this;this.observer=new MutationObserver((function(t){t.forEach((function(t){var n,a;if(t.attributeName==="class"||t.attributeName==="style"){var i=e.element.offsetWidth;var r=e.element.offsetHeight;if(i!==((n=e.offset)===null||n===void 0?void 0:n.width)||r!==((a=e.offset)===null||a===void 0?void 0:a.height)){e.updateArea()}e.offset={width:i,height:r}}}))}));this.observer.observe(this.element,{attributes:true})};e.prototype.disconnectedCallback=function(){var e;(e=this.observer)===null||e===void 0?void 0:e.disconnect()};e.prototype.componentDidLoad=function(){this.viewsChanged()};e.prototype.render=function(){return n(i,{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd})};Object.defineProperty(e.prototype,"element",{get:function(){return a(this)},enumerable:false,configurable:true});return e}());o.style=r}}}));